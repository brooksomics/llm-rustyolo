# cargo-deny configuration
# See https://embarkstudios.github.io/cargo-deny/

# License configuration
[licenses]
# Version 2: All licenses are denied unless explicitly in the allow list
version = 2

# Allow these licenses
allow = [
    "MIT",
    "Apache-2.0",
    "Apache-2.0 WITH LLVM-exception",
    "BSD-2-Clause",
    "BSD-3-Clause",
    "ISC",
    "Unicode-3.0",  # Required by ICU crates (icu_collections, etc.) via reqwest
]

# Configuration for crates that should be ignored
[[licenses.clarify]]
name = "ring"
version = "*"
expression = "MIT AND ISC AND OpenSSL"
license-files = [
    { path = "LICENSE", hash = 0xbd0eed23 }
]

# Advisories configuration
[advisories]
# Version 2: All advisory types default to deny
version = 2
# The path where the advisory database is cloned/fetched into
db-path = "~/.cargo/advisory-db"
# The url(s) of the advisory databases to use
db-urls = ["https://github.com/rustsec/advisory-db"]
# Ignore specific advisories
ignore = [
    # number_prefix is unmaintained but it's a transitive dependency via self_update -> indicatif
    # The crate is simple and stable, and we don't directly use it
    # Tracking issue: https://github.com/jaemk/self_update/issues/109
    "RUSTSEC-2025-0119",
]

# Bans configuration
[bans]
# Lint level for when multiple versions of the same crate are detected
multiple-versions = "warn"
# Lint level for when a crate version requirement is `*`
wildcards = "allow"
# The graph highlighting used when creating dotgraphs for crates
highlight = "all"

# Sources configuration
[sources]
# Lint level for what to happen when a crate from a git repository is encountered
unknown-git = "warn"
# Lint level for what to happen when a crate from a registry is encountered
unknown-registry = "deny"
# Allow these git repositories
allow-git = []
